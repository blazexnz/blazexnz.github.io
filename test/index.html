<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="robots" content="noindex, nofollow">
  <title>8-Bar Rhythm Trainer</title>
  <style>
    :root{
      --bg:#0f1720;
      --panel:#0b1220;
      --muted:#99a1b3;
      --accent:#5eead4;
      --accent-2:#60a5fa;
      --bar:#111827;
      --beat:#1f2937;
      --highlight: #facc15;
      --radius:10px;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#07101a);color:#e6eef6}
    .app{
      max-width:1100px;
      margin:18px auto;
      padding:14px;
      box-sizing:border-box;
    }

    header{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:12px;
    }

    h1{font-size:16px;margin:0}
    .controls{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }

    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid rgba(255,255,255,0.03);
      padding:12px;
      border-radius:var(--radius);
      box-shadow: 0 6px 18px rgba(2,6,23,0.6);
    }

    .control-row{display:flex;gap:8px;align-items:center}

    label{font-size:13px;color:var(--muted);margin-right:6px}

    select,input[type="number"]{
      -webkit-appearance:none;
      appearance:none;
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:inherit;
      padding:8px 10px;
      border-radius:8px;
      min-width:64px;
      font-size:14px;
    }

    input[type="range"]{
      accent-color:var(--accent);
    }

    button{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid rgba(255,255,255,0.06);
      color:inherit;
      padding:10px 14px;
      border-radius:10px;
      font-size:14px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      cursor:pointer;
      touch-action: manipulation; /* prevent double tap zoom on many mobile browsers */
      -webkit-tap-highlight-color: rgba(0,0,0,0);
    }
    button:disabled{opacity:0.45;cursor:not-allowed}

    main {display:flex;flex-direction:column;gap:12px}

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }

    .line{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
      border:1px solid rgba(255,255,255,0.03);
      padding:10px;
      border-radius:12px;
      overflow:auto;
    }

    .bars{
      display:flex;
      gap:8px;
      align-items:stretch;
      padding:6px;
    }

    .bar{
      min-width:56px;
      flex:1 0 56px;
      background:var(--bar);
      border-radius:8px;
      padding:6px;
      display:flex;
      flex-direction:column;
      gap:6px;
      justify-content:center;
      align-items:center;
    }

    .bar .beats{
      width:100%;
      display:flex;
      gap:4px;
      justify-content:center;
      align-items:center;
    }

    .beat{
      flex:1 0 auto;
      min-width:16px;
      height:32px;
      background:var(--beat);
      border-radius:6px;
      display:flex;
      justify-content:center;
      align-items:center;
      font-weight:600;
      color:var(--muted);
      user-select:none;
      box-shadow: inset 0 -2px 0 rgba(0,0,0,0.2);
      transition:transform 0.08s ease, background 0.08s ease, color 0.08s;
      font-size:16px;
    }

    .beat.strong{font-weight:700;color:var(--accent-2)}
    .beat.current{
      background:linear-gradient(90deg, rgba(250,204,21,0.12), rgba(96,165,250,0.06));
      box-shadow: 0 6px 20px rgba(0,0,0,0.45), 0 0 18px rgba(250,204,21,0.06);
      transform: translateY(-6px) scale(1.04);
      color:var(--highlight);
    }

    .row-title{font-size:13px;color:var(--muted);margin-bottom:6px}

    .small{font-size:13px;color:var(--muted)}
    .top-controls{display:flex;gap:8px;align-items:center}

    footer{display:flex;justify-content:space-between;align-items:center;margin-top:8px;color:var(--muted);font-size:13px}

    /* Hover only on non-touch devices */
    @media (hover: hover) and (pointer: fine) {
      button:hover{ transform: translateY(-2px); box-shadow:0 10px 24px rgba(0,0,0,0.45)}
      .beat:hover{ transform:translateY(-4px); }
    }

    /* active style for touch */
    button:active{ transform: translateY(0); box-shadow:none; }
    .beat:active{ transform: translateY(-2px); }

    /* Responsive layout */
    @media (min-width:900px){
      .grid{grid-template-columns: 1fr}
      .bars{gap:10px}
      .bar{min-width:70px}
      .beat{height:40px;font-size:18px}
    }

    @media (max-width:420px){
      .bar{min-width:44px;padding:4px}
      .beat{height:30px;font-size:13px;min-width:12px}
      header{flex-direction:column;align-items:stretch;gap:8px}
    }

  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>8-Bar Rhythm Trainer</h1>
        <div class="small">Practice with 3/4 or 4/4, one or two lines (hands). Tap Play.</div>
      </div>

      <div class="controls panel">
        <div class="control-row">
          <label for="signature">Signature</label>
          <select id="signature" aria-label="Time signature">
            <option value="4">4/4</option>
            <option value="3">3/4</option>
          </select>

          <label for="lines">Lines</label>
          <select id="lines" aria-label="Number of lines">
            <option value="1">1 line</option>
            <option value="2">2 lines</option>
          </select>

          <label for="noteSymbol">Note</label>
          <select id="noteSymbol" aria-label="Note symbol">
            <option value="‚óè">Dot (‚óè)</option>
            <option value="x">Stick (x)</option>
            <option value="ü•Å">Drum (ü•Å)</option>
            <option value="‚ô©">Quarter (‚ô©)</option>
            <option value="‚ô¨">Note (‚ô¨)</option>
            <option value="‚Ä¢">Small (‚Ä¢)</option>
          </select>

          <label for="tempo">BPM</label>
          <input id="tempo" type="number" inputmode="numeric" pattern="[0-9]*" min="30" max="300" value="100" style="width:78px">

          <button id="playBtn" aria-pressed="false" title="Play">‚ñ∂ Play</button>
          <button id="stopBtn" disabled title="Stop">‚ñ† Stop</button>
        </div>
      </div>
    </header>

    <main>
      <div class="grid">
        <!-- Lines will be injected here -->
      </div>

      <div class="panel small">
        Tip: use 3/4 for waltz feel. Switch to 2 lines to practice left & right separately. The UI scales for iPhone and desktop.
      </div>
    </main>

    <footer>
      <div>8 bars √ó <span id="beatsPerBarLabel">4</span> beats</div>
      <div class="small">Touch optimized ¬∑ no zoom on button taps</div>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
